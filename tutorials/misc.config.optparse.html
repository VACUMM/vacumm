
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>1.3.3.8.2. Example with optparse &#8212; VACUMM v3.6.2 documentation</title>
    <link rel="stylesheet" href="../_static/vacumm.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
  </head><body>
<!--<div style="background-color: white; text-align: left; padding: 10px 10px 15px 15px">
<a href="../index.html"><img src="../static/logo_vacumm.png" border="0" alt="vacumm"/></a>
</div>-->

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../index.html">Home</a>|&nbsp;</li>
        <li><a href="../contents.html">Docs</a>|&nbsp;</li>
        <li><a href="../user.faq.html">FAQ</a>|&nbsp;</li>
<!--         <li><a href="../search.html">chercher</a>|&nbsp;</li> -->
        <li><a href="../gallery.html">Gallery</a>|&nbsp;</li>
        <li><a href="https://forge.ifremer.fr/projects/vacumm">Forge</a>&nbsp; &raquo;</li>
 
      </ul>
    </div>

      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/logo_vacumm.png" alt="Logo"/>
            </a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/tutorials/misc.config.optparse.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="example-with-optparse">
<span id="user-tut-misc-config-optparse"></span><h1>1.3.3.8.2. Example with <a class="reference external" href="https://docs.python.org/dev/library/optparse.html#module-optparse" title="(in Python v3.8)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">optparse</span></code></a><a class="headerlink" href="#example-with-optparse" title="Permalink to this headline">¶</a></h1>
<p>In this example we’ll show you how to use the <a class="reference internal" href="../library/misc.config.html#vacumm.misc.config.ConfigManager" title="vacumm.misc.config.ConfigManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConfigManager</span></code></a>
to handle defaults, command line arguments and a configuration file.
The command line arguments may be used through <a class="reference external" href="https://docs.python.org/dev/library/optparse.html#module-optparse" title="(in Python v3.8)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">optparse</span></code></a> or <a class="reference external" href="https://docs.python.org/dev/library/argparse.html#module-argparse" title="(in Python v3.8)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">argparse</span></code></a> module.</p>
<p>Specification file:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="c1"># This is an example specification file</span>

<span class="c1"># A section with scalar options</span>
<span class="k">[scalars]</span>
    <span class="na">boolean</span> <span class="o">=</span> <span class="s">boolean(default=False) # A boolean value</span>
<span class="s">    integer = integer(default=0, min=-10, max=10) # An integer value between -10 and 10</span>
<span class="s">    float = float(default=0.0, min=-10.0, max=10.0) # A float value between -10.0 and 10.0</span>
<span class="s">    string = string(default=&#39;string&#39;) # A string value</span>
<span class="c1"># A section with list options</span>
<span class="k">[lists]</span>
    <span class="na">booleans</span> <span class="o">=</span> <span class="s">booleans(default=list(False, True)) # A list of booleans</span>
<span class="s">    integers = integers(default=list(0, 1), min=-10, max=10) # A list of integers</span>
<span class="s">    floats = floats(default=list(0.0, 1.0), min=-10.0, max=10.0) # A list of floats</span>
<span class="s">    strings = strings(default=list(&#39;foo&#39;, &#39;bar&#39;)) # A list of strings</span>
</pre></div>
</div>
<p>Configuration file:</p>
<div class="highlight-cfg notranslate"><div class="highlight"><pre><span></span><span class="c1"># This is an example configuration file</span>

<span class="c1"># A section with scalar options</span>
<span class="k">[scalars]</span>
    <span class="na">boolean</span> <span class="o">=</span> <span class="s">True</span>
<span class="s">    integer = 1</span>
<span class="s">    float = 1.0</span>
<span class="s">    string = foo</span>
<span class="c1"># A section with list options</span>
<span class="k">[lists]</span>
    <span class="na">floats</span> <span class="o">=</span> <span class="s">0.0, 1.0, 1.0, 0.0</span>
<span class="s">    booleans = False, True, True, False</span>
<span class="s">    integers = 0, 1, 1, 0</span>
<span class="s">    strings = foo, bar, bar, foo, foo bar, &#39; foo bar &#39;</span>
</pre></div>
</div>
<p>Sample code using these specification and configuration:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># -*- coding: utf-8 -*-</span>

<span class="kn">import</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">os.path</span> <span class="kn">as</span> <span class="nn">P</span><span class="o">,</span> <span class="nn">pprint</span><span class="o">,</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">vacumm.misc.config</span> <span class="kn">as</span> <span class="nn">C</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">argv</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="n">specfile</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">.ini&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">P</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">cfgfile</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">.cfg&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">P</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
    
    <span class="k">if</span> <span class="ow">not</span> <span class="s1">&#39;--cfgfile&#39;</span> <span class="ow">in</span> <span class="n">argv</span><span class="p">:</span>
        <span class="n">argv</span> <span class="o">+=</span> <span class="p">[</span><span class="s1">&#39;--cfgfile&#39;</span><span class="p">,</span> <span class="n">cfgfile</span><span class="p">]</span>
    
    <span class="n">cfgm</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">ConfigManager</span><span class="p">(</span><span class="n">specfile</span><span class="p">)</span>
    
    <span class="k">print</span> <span class="s1">&#39;***&#39;</span>
    <span class="k">print</span> <span class="s1">&#39;*** You can use the --help flag with this script to interact with it&#39;</span>
    <span class="k">print</span> <span class="s1">&#39;*** to test setting config values with command line options and/or&#39;</span>
    <span class="k">print</span> <span class="s1">&#39;*** the config file&#39;</span>
    <span class="k">print</span> <span class="s1">&#39;***&#39;</span>
    
    <span class="k">print</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">### Using the config manager</span><span class="se">\n</span><span class="s1">&#39;</span>
    
    <span class="n">cfg</span> <span class="o">=</span> <span class="n">cfgm</span><span class="o">.</span><span class="n">defaults</span><span class="p">()</span>
    <span class="k">print</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">*** Default config from specfile </span><span class="si">%r</span><span class="s1">:</span><span class="se">\n\n</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">specfile</span><span class="p">,</span> <span class="n">pprint</span><span class="o">.</span><span class="n">pformat</span><span class="p">(</span><span class="n">cfg</span><span class="o">.</span><span class="n">dict</span><span class="p">()))</span>
    
    <span class="c1"># FIXME: load method which currently apply defaults, make it as an option ?</span>
    <span class="c1">#cfg = cfgm.load(cfgfile)</span>
    <span class="c1"># The ConfigManager currently set defaults from its specifications when using its load method.</span>
    <span class="c1"># So in this example we&#39;ll directly use configobj to show you only the content of the configuration file</span>
    <span class="kn">import</span> <span class="nn">configobj</span>
    <span class="n">cfg</span> <span class="o">=</span> <span class="n">configobj</span><span class="o">.</span><span class="n">ConfigObj</span><span class="p">(</span><span class="n">cfgfile</span><span class="p">)</span>
    <span class="k">print</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">*** Content of the config file </span><span class="si">%r</span><span class="s1">:</span><span class="se">\n\n</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">cfgfile</span><span class="p">,</span> <span class="n">pprint</span><span class="o">.</span><span class="n">pformat</span><span class="p">(</span><span class="n">cfg</span><span class="o">.</span><span class="n">dict</span><span class="p">()))</span>
    
    <span class="n">optcfg</span> <span class="o">=</span> <span class="n">argcfg</span> <span class="o">=</span> <span class="bp">None</span>
    
    <span class="k">print</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">### Using the config manager with optparse</span><span class="se">\n</span><span class="s1">&#39;</span>
    
    <span class="k">try</span><span class="p">:</span>
    
        <span class="n">cfg</span> <span class="o">=</span> <span class="n">optcfg</span> <span class="o">=</span> <span class="n">cfgm</span><span class="o">.</span><span class="n">opt_parse</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="n">argv</span><span class="p">)</span>
        <span class="k">print</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">*** Command line config only:</span><span class="se">\n\n</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">pprint</span><span class="o">.</span><span class="n">pformat</span><span class="p">(</span><span class="n">cfg</span><span class="o">.</span><span class="n">dict</span><span class="p">()))</span>
        
        <span class="n">cfg</span> <span class="o">=</span> <span class="n">cfgm</span><span class="o">.</span><span class="n">opt_parse</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="n">argv</span><span class="p">,</span> <span class="n">cfgfilepatch</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="k">print</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">*** Merged config: file and command:</span><span class="se">\n\n</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">pprint</span><span class="o">.</span><span class="n">pformat</span><span class="p">(</span><span class="n">cfg</span><span class="o">.</span><span class="n">dict</span><span class="p">()))</span>
        
        <span class="n">cfg</span> <span class="o">=</span> <span class="n">cfgm</span><span class="o">.</span><span class="n">opt_parse</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="n">argv</span><span class="p">,</span> <span class="n">patch</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">cfgfilepatch</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="k">print</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">*** Merged config: default, file and command:</span><span class="se">\n\n</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">pprint</span><span class="o">.</span><span class="n">pformat</span><span class="p">(</span><span class="n">cfg</span><span class="o">.</span><span class="n">dict</span><span class="p">()))</span>
        
        <span class="c1"># FIXME: because the load method applies defaults, the real order is command, default and file</span>
        <span class="c1">#cfg = cfgm.opt_parse(args=argv, patch=True, cfgfilepatch=&#39;after&#39;)</span>
        <span class="c1">#print &#39;\n*** Merged config: default, command and file:\n\n%s\n&#39;%(pprint.pformat(cfg.dict()))</span>
    
    <span class="k">except</span> <span class="ne">SystemExit</span><span class="p">:</span> <span class="k">pass</span>
    
    <span class="k">print</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">### Using the config manager with argparse</span><span class="se">\n</span><span class="s1">&#39;</span>
    
    <span class="k">try</span><span class="p">:</span>
    
        <span class="n">cfg</span> <span class="o">=</span> <span class="n">argcfg</span> <span class="o">=</span> <span class="n">cfgm</span><span class="o">.</span><span class="n">arg_parse</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="n">argv</span><span class="p">)</span>
        <span class="k">print</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">*** Command line config only:</span><span class="se">\n\n</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">pprint</span><span class="o">.</span><span class="n">pformat</span><span class="p">(</span><span class="n">cfg</span><span class="o">.</span><span class="n">dict</span><span class="p">()))</span>
        
        <span class="n">cfg</span> <span class="o">=</span> <span class="n">cfgm</span><span class="o">.</span><span class="n">arg_parse</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="n">argv</span><span class="p">,</span> <span class="n">cfgfilepatch</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="k">print</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">*** Merged config: file and command:</span><span class="se">\n\n</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">pprint</span><span class="o">.</span><span class="n">pformat</span><span class="p">(</span><span class="n">cfg</span><span class="o">.</span><span class="n">dict</span><span class="p">()))</span>
        
        <span class="n">cfg</span> <span class="o">=</span> <span class="n">cfgm</span><span class="o">.</span><span class="n">arg_parse</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="n">argv</span><span class="p">,</span> <span class="n">patch</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">cfgfilepatch</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="k">print</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">*** Merged config: default, file and command:</span><span class="se">\n\n</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">pprint</span><span class="o">.</span><span class="n">pformat</span><span class="p">(</span><span class="n">cfg</span><span class="o">.</span><span class="n">dict</span><span class="p">()))</span>
    
    <span class="k">except</span> <span class="ne">SystemExit</span><span class="p">:</span> <span class="k">pass</span>
    
    <span class="k">assert</span> <span class="n">optcfg</span> <span class="o">==</span> <span class="n">argcfg</span><span class="p">,</span> <span class="s1">&#39;optparse and argparse configurations differ !&#39;</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span><span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>

</pre></div>
</div>
<p>The help generated is:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ ../../../scripts/tutorials/misc.config.py --help
/home/shom/sraynaud/Dev/forge/vacumm/lib/vacumm/config.py:508: UserWarning: Bad configuration value: False. Error: &quot;&#39;module&#39; object has no attribute &#39;getfullargspec&#39;&quot;. It must conform the follwing specs: boolean(default=False). Switching to default value: False.
  warn(warnmsg.format(**locals()))
/home/shom/sraynaud/Dev/forge/vacumm/lib/vacumm/config.py:508: UserWarning: Bad configuration value: 0. Error: &quot;&#39;module&#39; object has no attribute &#39;getfullargspec&#39;&quot;. It must conform the follwing specs: integer(default=0, min=-10, max=10). Switching to default value: 0.
  warn(warnmsg.format(**locals()))
/home/shom/sraynaud/Dev/forge/vacumm/lib/vacumm/config.py:508: UserWarning: Bad configuration value: 0.0. Error: &quot;&#39;module&#39; object has no attribute &#39;getfullargspec&#39;&quot;. It must conform the follwing specs: float(default=0.0, min=-10.0, max=10.0). Switching to default value: 0.0.
  warn(warnmsg.format(**locals()))
/home/shom/sraynaud/Dev/forge/vacumm/lib/vacumm/config.py:508: UserWarning: Bad configuration value: string. Error: &quot;&#39;module&#39; object has no attribute &#39;getfullargspec&#39;&quot;. It must conform the follwing specs: string(default=&#39;string&#39;). Switching to default value: string.
  warn(warnmsg.format(**locals()))
/home/shom/sraynaud/Dev/forge/vacumm/lib/vacumm/config.py:508: UserWarning: Bad configuration value: [&#39;False&#39;, &#39;True&#39;]. Error: &quot;&#39;module&#39; object has no attribute &#39;getfullargspec&#39;&quot;. It must conform the follwing specs: booleans(default=list(False, True)). Switching to default value: [&#39;False&#39;, &#39;True&#39;].
  warn(warnmsg.format(**locals()))
/home/shom/sraynaud/Dev/forge/vacumm/lib/vacumm/config.py:508: UserWarning: Bad configuration value: [&#39;0&#39;, &#39;1&#39;]. Error: &quot;&#39;module&#39; object has no attribute &#39;getfullargspec&#39;&quot;. It must conform the follwing specs: integers(default=list(0, 1), min=-10, max=10). Switching to default value: [&#39;0&#39;, &#39;1&#39;].
  warn(warnmsg.format(**locals()))
/home/shom/sraynaud/Dev/forge/vacumm/lib/vacumm/config.py:508: UserWarning: Bad configuration value: [&#39;0.0&#39;, &#39;1.0&#39;]. Error: &quot;&#39;module&#39; object has no attribute &#39;getfullargspec&#39;&quot;. It must conform the follwing specs: floats(default=list(0.0, 1.0), min=-10.0, max=10.0). Switching to default value: [&#39;0.0&#39;, &#39;1.0&#39;].
  warn(warnmsg.format(**locals()))
/home/shom/sraynaud/Dev/forge/vacumm/lib/vacumm/config.py:508: UserWarning: Bad configuration value: [&#39;foo&#39;, &#39;bar&#39;]. Error: &quot;&#39;module&#39; object has no attribute &#39;getfullargspec&#39;&quot;. It must conform the follwing specs: strings(default=list(&#39;foo&#39;, &#39;bar&#39;)). Switching to default value: [&#39;foo&#39;, &#39;bar&#39;].
  warn(warnmsg.format(**locals()))
***
*** You can use the --help flag with this script to interact with it
*** to test setting config values with command line options and/or
*** the config file
***

### Using the config manager


*** Default config from specfile &#39;../../../scripts/tutorials/misc.config.ini&#39;:

{&#39;lists&#39;: {&#39;booleans&#39;: [&#39;False&#39;, &#39;True&#39;],
           &#39;floats&#39;: [&#39;0.0&#39;, &#39;1.0&#39;],
           &#39;integers&#39;: [&#39;0&#39;, &#39;1&#39;],
           &#39;strings&#39;: [&#39;foo&#39;, &#39;bar&#39;]},
 &#39;scalars&#39;: {&#39;boolean&#39;: &#39;False&#39;,
             &#39;float&#39;: &#39;0.0&#39;,
             &#39;integer&#39;: &#39;0&#39;,
             &#39;string&#39;: &#39;string&#39;}}


*** Content of the config file &#39;../../../scripts/tutorials/misc.config.cfg&#39;:

{&#39;lists&#39;: {&#39;booleans&#39;: [&#39;False&#39;, &#39;True&#39;, &#39;True&#39;, &#39;False&#39;],
           &#39;floats&#39;: [&#39;0.0&#39;, &#39;1.0&#39;, &#39;1.0&#39;, &#39;0.0&#39;],
           &#39;integers&#39;: [&#39;0&#39;, &#39;1&#39;, &#39;1&#39;, &#39;0&#39;],
           &#39;strings&#39;: [&#39;foo&#39;, &#39;bar&#39;, &#39;bar&#39;, &#39;foo&#39;, &#39;foo bar&#39;, &#39; foo bar &#39;]},
 &#39;scalars&#39;: {&#39;boolean&#39;: &#39;True&#39;,
             &#39;float&#39;: &#39;1.0&#39;,
             &#39;integer&#39;: &#39;1&#39;,
             &#39;string&#39;: &#39;foo&#39;}}


### Using the config manager with optparse

Traceback (most recent call last):
  File &quot;../../../scripts/tutorials/misc.config.py&quot;, line 74, in &lt;module&gt;
    main(sys.argv[1:])
  File &quot;../../../scripts/tutorials/misc.config.py&quot;, line 41, in main
    cfg = optcfg = cfgm.opt_parse(args=argv)
  File &quot;/home/shom/sraynaud/Dev/forge/vacumm/lib/vacumm/misc/config.py&quot;, line 1368, in opt_parse
    (options, args) = parser.parse_args(list(args))
  File &quot;/local/tmp/sraynaud/Soft/conda2/lib/python2.7/optparse.py&quot;, line 1384, in parse_args
    values = self.get_default_values()
  File &quot;/local/tmp/sraynaud/Soft/conda2/lib/python2.7/optparse.py&quot;, line 1329, in get_default_values
    defaults[option.dest] = option.check_value(opt_str, default)
  File &quot;/local/tmp/sraynaud/Soft/conda2/lib/python2.7/optparse.py&quot;, line 770, in check_value
    return checker(self, opt, value)
  File &quot;/home/shom/sraynaud/Dev/forge/vacumm/lib/vacumm/misc/config.py&quot;, line 1302, in wrapper_option_type_checker
    return func(value)
  File &quot;/home/shom/sraynaud/Dev/forge/vacumm/lib/vacumm/misc/config.py&quot;, line 132, in validator_wrapper
    argspec = inspect.getfullargspec(validator)
AttributeError: &#39;module&#39; object has no attribute &#39;getfullargspec&#39;
</pre></div>
</div>
<p>The outputs of this code are:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ ../../../scripts/tutorials/misc.config.py
/home/shom/sraynaud/Dev/forge/vacumm/lib/vacumm/config.py:508: UserWarning: Bad configuration value: False. Error: &quot;&#39;module&#39; object has no attribute &#39;getfullargspec&#39;&quot;. It must conform the follwing specs: boolean(default=False). Switching to default value: False.
  warn(warnmsg.format(**locals()))
/home/shom/sraynaud/Dev/forge/vacumm/lib/vacumm/config.py:508: UserWarning: Bad configuration value: 0. Error: &quot;&#39;module&#39; object has no attribute &#39;getfullargspec&#39;&quot;. It must conform the follwing specs: integer(default=0, min=-10, max=10). Switching to default value: 0.
  warn(warnmsg.format(**locals()))
/home/shom/sraynaud/Dev/forge/vacumm/lib/vacumm/config.py:508: UserWarning: Bad configuration value: 0.0. Error: &quot;&#39;module&#39; object has no attribute &#39;getfullargspec&#39;&quot;. It must conform the follwing specs: float(default=0.0, min=-10.0, max=10.0). Switching to default value: 0.0.
  warn(warnmsg.format(**locals()))
/home/shom/sraynaud/Dev/forge/vacumm/lib/vacumm/config.py:508: UserWarning: Bad configuration value: string. Error: &quot;&#39;module&#39; object has no attribute &#39;getfullargspec&#39;&quot;. It must conform the follwing specs: string(default=&#39;string&#39;). Switching to default value: string.
  warn(warnmsg.format(**locals()))
/home/shom/sraynaud/Dev/forge/vacumm/lib/vacumm/config.py:508: UserWarning: Bad configuration value: [&#39;False&#39;, &#39;True&#39;]. Error: &quot;&#39;module&#39; object has no attribute &#39;getfullargspec&#39;&quot;. It must conform the follwing specs: booleans(default=list(False, True)). Switching to default value: [&#39;False&#39;, &#39;True&#39;].
  warn(warnmsg.format(**locals()))
/home/shom/sraynaud/Dev/forge/vacumm/lib/vacumm/config.py:508: UserWarning: Bad configuration value: [&#39;0&#39;, &#39;1&#39;]. Error: &quot;&#39;module&#39; object has no attribute &#39;getfullargspec&#39;&quot;. It must conform the follwing specs: integers(default=list(0, 1), min=-10, max=10). Switching to default value: [&#39;0&#39;, &#39;1&#39;].
  warn(warnmsg.format(**locals()))
/home/shom/sraynaud/Dev/forge/vacumm/lib/vacumm/config.py:508: UserWarning: Bad configuration value: [&#39;0.0&#39;, &#39;1.0&#39;]. Error: &quot;&#39;module&#39; object has no attribute &#39;getfullargspec&#39;&quot;. It must conform the follwing specs: floats(default=list(0.0, 1.0), min=-10.0, max=10.0). Switching to default value: [&#39;0.0&#39;, &#39;1.0&#39;].
  warn(warnmsg.format(**locals()))
/home/shom/sraynaud/Dev/forge/vacumm/lib/vacumm/config.py:508: UserWarning: Bad configuration value: [&#39;foo&#39;, &#39;bar&#39;]. Error: &quot;&#39;module&#39; object has no attribute &#39;getfullargspec&#39;&quot;. It must conform the follwing specs: strings(default=list(&#39;foo&#39;, &#39;bar&#39;)). Switching to default value: [&#39;foo&#39;, &#39;bar&#39;].
  warn(warnmsg.format(**locals()))
***
*** You can use the --help flag with this script to interact with it
*** to test setting config values with command line options and/or
*** the config file
***

### Using the config manager


*** Default config from specfile &#39;../../../scripts/tutorials/misc.config.ini&#39;:

{&#39;lists&#39;: {&#39;booleans&#39;: [&#39;False&#39;, &#39;True&#39;],
           &#39;floats&#39;: [&#39;0.0&#39;, &#39;1.0&#39;],
           &#39;integers&#39;: [&#39;0&#39;, &#39;1&#39;],
           &#39;strings&#39;: [&#39;foo&#39;, &#39;bar&#39;]},
 &#39;scalars&#39;: {&#39;boolean&#39;: &#39;False&#39;,
             &#39;float&#39;: &#39;0.0&#39;,
             &#39;integer&#39;: &#39;0&#39;,
             &#39;string&#39;: &#39;string&#39;}}


*** Content of the config file &#39;../../../scripts/tutorials/misc.config.cfg&#39;:

{&#39;lists&#39;: {&#39;booleans&#39;: [&#39;False&#39;, &#39;True&#39;, &#39;True&#39;, &#39;False&#39;],
           &#39;floats&#39;: [&#39;0.0&#39;, &#39;1.0&#39;, &#39;1.0&#39;, &#39;0.0&#39;],
           &#39;integers&#39;: [&#39;0&#39;, &#39;1&#39;, &#39;1&#39;, &#39;0&#39;],
           &#39;strings&#39;: [&#39;foo&#39;, &#39;bar&#39;, &#39;bar&#39;, &#39;foo&#39;, &#39;foo bar&#39;, &#39; foo bar &#39;]},
 &#39;scalars&#39;: {&#39;boolean&#39;: &#39;True&#39;,
             &#39;float&#39;: &#39;1.0&#39;,
             &#39;integer&#39;: &#39;1&#39;,
             &#39;string&#39;: &#39;foo&#39;}}


### Using the config manager with optparse

Traceback (most recent call last):
  File &quot;../../../scripts/tutorials/misc.config.py&quot;, line 74, in &lt;module&gt;
    main(sys.argv[1:])
  File &quot;../../../scripts/tutorials/misc.config.py&quot;, line 41, in main
    cfg = optcfg = cfgm.opt_parse(args=argv)
  File &quot;/home/shom/sraynaud/Dev/forge/vacumm/lib/vacumm/misc/config.py&quot;, line 1368, in opt_parse
    (options, args) = parser.parse_args(list(args))
  File &quot;/local/tmp/sraynaud/Soft/conda2/lib/python2.7/optparse.py&quot;, line 1384, in parse_args
    values = self.get_default_values()
  File &quot;/local/tmp/sraynaud/Soft/conda2/lib/python2.7/optparse.py&quot;, line 1329, in get_default_values
    defaults[option.dest] = option.check_value(opt_str, default)
  File &quot;/local/tmp/sraynaud/Soft/conda2/lib/python2.7/optparse.py&quot;, line 770, in check_value
    return checker(self, opt, value)
  File &quot;/home/shom/sraynaud/Dev/forge/vacumm/lib/vacumm/misc/config.py&quot;, line 1302, in wrapper_option_type_checker
    return func(value)
  File &quot;/home/shom/sraynaud/Dev/forge/vacumm/lib/vacumm/misc/config.py&quot;, line 132, in validator_wrapper
    argspec = inspect.getfullargspec(validator)
AttributeError: &#39;module&#39; object has no attribute &#39;getfullargspec&#39;
</pre></div>
</div>
<p>The outputs of this code with configuration setup with command line options:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ ../../../scripts/tutorials/misc.config.py --scalars-string=&quot;foo, &#39;hello world&#39;&quot; --lists-floats=&quot;42,3.14&quot;
/home/shom/sraynaud/Dev/forge/vacumm/lib/vacumm/config.py:508: UserWarning: Bad configuration value: False. Error: &quot;&#39;module&#39; object has no attribute &#39;getfullargspec&#39;&quot;. It must conform the follwing specs: boolean(default=False). Switching to default value: False.
  warn(warnmsg.format(**locals()))
/home/shom/sraynaud/Dev/forge/vacumm/lib/vacumm/config.py:508: UserWarning: Bad configuration value: 0. Error: &quot;&#39;module&#39; object has no attribute &#39;getfullargspec&#39;&quot;. It must conform the follwing specs: integer(default=0, min=-10, max=10). Switching to default value: 0.
  warn(warnmsg.format(**locals()))
/home/shom/sraynaud/Dev/forge/vacumm/lib/vacumm/config.py:508: UserWarning: Bad configuration value: 0.0. Error: &quot;&#39;module&#39; object has no attribute &#39;getfullargspec&#39;&quot;. It must conform the follwing specs: float(default=0.0, min=-10.0, max=10.0). Switching to default value: 0.0.
  warn(warnmsg.format(**locals()))
/home/shom/sraynaud/Dev/forge/vacumm/lib/vacumm/config.py:508: UserWarning: Bad configuration value: string. Error: &quot;&#39;module&#39; object has no attribute &#39;getfullargspec&#39;&quot;. It must conform the follwing specs: string(default=&#39;string&#39;). Switching to default value: string.
  warn(warnmsg.format(**locals()))
/home/shom/sraynaud/Dev/forge/vacumm/lib/vacumm/config.py:508: UserWarning: Bad configuration value: [&#39;False&#39;, &#39;True&#39;]. Error: &quot;&#39;module&#39; object has no attribute &#39;getfullargspec&#39;&quot;. It must conform the follwing specs: booleans(default=list(False, True)). Switching to default value: [&#39;False&#39;, &#39;True&#39;].
  warn(warnmsg.format(**locals()))
/home/shom/sraynaud/Dev/forge/vacumm/lib/vacumm/config.py:508: UserWarning: Bad configuration value: [&#39;0&#39;, &#39;1&#39;]. Error: &quot;&#39;module&#39; object has no attribute &#39;getfullargspec&#39;&quot;. It must conform the follwing specs: integers(default=list(0, 1), min=-10, max=10). Switching to default value: [&#39;0&#39;, &#39;1&#39;].
  warn(warnmsg.format(**locals()))
/home/shom/sraynaud/Dev/forge/vacumm/lib/vacumm/config.py:508: UserWarning: Bad configuration value: [&#39;0.0&#39;, &#39;1.0&#39;]. Error: &quot;&#39;module&#39; object has no attribute &#39;getfullargspec&#39;&quot;. It must conform the follwing specs: floats(default=list(0.0, 1.0), min=-10.0, max=10.0). Switching to default value: [&#39;0.0&#39;, &#39;1.0&#39;].
  warn(warnmsg.format(**locals()))
/home/shom/sraynaud/Dev/forge/vacumm/lib/vacumm/config.py:508: UserWarning: Bad configuration value: [&#39;foo&#39;, &#39;bar&#39;]. Error: &quot;&#39;module&#39; object has no attribute &#39;getfullargspec&#39;&quot;. It must conform the follwing specs: strings(default=list(&#39;foo&#39;, &#39;bar&#39;)). Switching to default value: [&#39;foo&#39;, &#39;bar&#39;].
  warn(warnmsg.format(**locals()))
***
*** You can use the --help flag with this script to interact with it
*** to test setting config values with command line options and/or
*** the config file
***

### Using the config manager


*** Default config from specfile &#39;../../../scripts/tutorials/misc.config.ini&#39;:

{&#39;lists&#39;: {&#39;booleans&#39;: [&#39;False&#39;, &#39;True&#39;],
           &#39;floats&#39;: [&#39;0.0&#39;, &#39;1.0&#39;],
           &#39;integers&#39;: [&#39;0&#39;, &#39;1&#39;],
           &#39;strings&#39;: [&#39;foo&#39;, &#39;bar&#39;]},
 &#39;scalars&#39;: {&#39;boolean&#39;: &#39;False&#39;,
             &#39;float&#39;: &#39;0.0&#39;,
             &#39;integer&#39;: &#39;0&#39;,
             &#39;string&#39;: &#39;string&#39;}}


*** Content of the config file &#39;../../../scripts/tutorials/misc.config.cfg&#39;:

{&#39;lists&#39;: {&#39;booleans&#39;: [&#39;False&#39;, &#39;True&#39;, &#39;True&#39;, &#39;False&#39;],
           &#39;floats&#39;: [&#39;0.0&#39;, &#39;1.0&#39;, &#39;1.0&#39;, &#39;0.0&#39;],
           &#39;integers&#39;: [&#39;0&#39;, &#39;1&#39;, &#39;1&#39;, &#39;0&#39;],
           &#39;strings&#39;: [&#39;foo&#39;, &#39;bar&#39;, &#39;bar&#39;, &#39;foo&#39;, &#39;foo bar&#39;, &#39; foo bar &#39;]},
 &#39;scalars&#39;: {&#39;boolean&#39;: &#39;True&#39;,
             &#39;float&#39;: &#39;1.0&#39;,
             &#39;integer&#39;: &#39;1&#39;,
             &#39;string&#39;: &#39;foo&#39;}}


### Using the config manager with optparse

Traceback (most recent call last):
  File &quot;../../../scripts/tutorials/misc.config.py&quot;, line 74, in &lt;module&gt;
    main(sys.argv[1:])
  File &quot;../../../scripts/tutorials/misc.config.py&quot;, line 41, in main
    cfg = optcfg = cfgm.opt_parse(args=argv)
  File &quot;/home/shom/sraynaud/Dev/forge/vacumm/lib/vacumm/misc/config.py&quot;, line 1368, in opt_parse
    (options, args) = parser.parse_args(list(args))
  File &quot;/local/tmp/sraynaud/Soft/conda2/lib/python2.7/optparse.py&quot;, line 1384, in parse_args
    values = self.get_default_values()
  File &quot;/local/tmp/sraynaud/Soft/conda2/lib/python2.7/optparse.py&quot;, line 1329, in get_default_values
    defaults[option.dest] = option.check_value(opt_str, default)
  File &quot;/local/tmp/sraynaud/Soft/conda2/lib/python2.7/optparse.py&quot;, line 770, in check_value
    return checker(self, opt, value)
  File &quot;/home/shom/sraynaud/Dev/forge/vacumm/lib/vacumm/misc/config.py&quot;, line 1302, in wrapper_option_type_checker
    return func(value)
  File &quot;/home/shom/sraynaud/Dev/forge/vacumm/lib/vacumm/misc/config.py&quot;, line 132, in validator_wrapper
    argspec = inspect.getfullargspec(validator)
AttributeError: &#39;module&#39; object has no attribute &#39;getfullargspec&#39;
</pre></div>
</div>
<p>The outputs of this code with configuration setup with command line options and a configuration file :</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ ../../../scripts/tutorials/misc.config.py --scalars-string=&quot;foo, &#39;hello world&#39;&quot; --lists-floats=&quot;42,3.14&quot; --cfgfile=tutorials/python/misc.config.cfg
/home/shom/sraynaud/Dev/forge/vacumm/lib/vacumm/config.py:508: UserWarning: Bad configuration value: False. Error: &quot;&#39;module&#39; object has no attribute &#39;getfullargspec&#39;&quot;. It must conform the follwing specs: boolean(default=False). Switching to default value: False.
  warn(warnmsg.format(**locals()))
/home/shom/sraynaud/Dev/forge/vacumm/lib/vacumm/config.py:508: UserWarning: Bad configuration value: 0. Error: &quot;&#39;module&#39; object has no attribute &#39;getfullargspec&#39;&quot;. It must conform the follwing specs: integer(default=0, min=-10, max=10). Switching to default value: 0.
  warn(warnmsg.format(**locals()))
/home/shom/sraynaud/Dev/forge/vacumm/lib/vacumm/config.py:508: UserWarning: Bad configuration value: 0.0. Error: &quot;&#39;module&#39; object has no attribute &#39;getfullargspec&#39;&quot;. It must conform the follwing specs: float(default=0.0, min=-10.0, max=10.0). Switching to default value: 0.0.
  warn(warnmsg.format(**locals()))
/home/shom/sraynaud/Dev/forge/vacumm/lib/vacumm/config.py:508: UserWarning: Bad configuration value: string. Error: &quot;&#39;module&#39; object has no attribute &#39;getfullargspec&#39;&quot;. It must conform the follwing specs: string(default=&#39;string&#39;). Switching to default value: string.
  warn(warnmsg.format(**locals()))
/home/shom/sraynaud/Dev/forge/vacumm/lib/vacumm/config.py:508: UserWarning: Bad configuration value: [&#39;False&#39;, &#39;True&#39;]. Error: &quot;&#39;module&#39; object has no attribute &#39;getfullargspec&#39;&quot;. It must conform the follwing specs: booleans(default=list(False, True)). Switching to default value: [&#39;False&#39;, &#39;True&#39;].
  warn(warnmsg.format(**locals()))
/home/shom/sraynaud/Dev/forge/vacumm/lib/vacumm/config.py:508: UserWarning: Bad configuration value: [&#39;0&#39;, &#39;1&#39;]. Error: &quot;&#39;module&#39; object has no attribute &#39;getfullargspec&#39;&quot;. It must conform the follwing specs: integers(default=list(0, 1), min=-10, max=10). Switching to default value: [&#39;0&#39;, &#39;1&#39;].
  warn(warnmsg.format(**locals()))
/home/shom/sraynaud/Dev/forge/vacumm/lib/vacumm/config.py:508: UserWarning: Bad configuration value: [&#39;0.0&#39;, &#39;1.0&#39;]. Error: &quot;&#39;module&#39; object has no attribute &#39;getfullargspec&#39;&quot;. It must conform the follwing specs: floats(default=list(0.0, 1.0), min=-10.0, max=10.0). Switching to default value: [&#39;0.0&#39;, &#39;1.0&#39;].
  warn(warnmsg.format(**locals()))
/home/shom/sraynaud/Dev/forge/vacumm/lib/vacumm/config.py:508: UserWarning: Bad configuration value: [&#39;foo&#39;, &#39;bar&#39;]. Error: &quot;&#39;module&#39; object has no attribute &#39;getfullargspec&#39;&quot;. It must conform the follwing specs: strings(default=list(&#39;foo&#39;, &#39;bar&#39;)). Switching to default value: [&#39;foo&#39;, &#39;bar&#39;].
  warn(warnmsg.format(**locals()))
***
*** You can use the --help flag with this script to interact with it
*** to test setting config values with command line options and/or
*** the config file
***

### Using the config manager


*** Default config from specfile &#39;../../../scripts/tutorials/misc.config.ini&#39;:

{&#39;lists&#39;: {&#39;booleans&#39;: [&#39;False&#39;, &#39;True&#39;],
           &#39;floats&#39;: [&#39;0.0&#39;, &#39;1.0&#39;],
           &#39;integers&#39;: [&#39;0&#39;, &#39;1&#39;],
           &#39;strings&#39;: [&#39;foo&#39;, &#39;bar&#39;]},
 &#39;scalars&#39;: {&#39;boolean&#39;: &#39;False&#39;,
             &#39;float&#39;: &#39;0.0&#39;,
             &#39;integer&#39;: &#39;0&#39;,
             &#39;string&#39;: &#39;string&#39;}}


*** Content of the config file &#39;../../../scripts/tutorials/misc.config.cfg&#39;:

{&#39;lists&#39;: {&#39;booleans&#39;: [&#39;False&#39;, &#39;True&#39;, &#39;True&#39;, &#39;False&#39;],
           &#39;floats&#39;: [&#39;0.0&#39;, &#39;1.0&#39;, &#39;1.0&#39;, &#39;0.0&#39;],
           &#39;integers&#39;: [&#39;0&#39;, &#39;1&#39;, &#39;1&#39;, &#39;0&#39;],
           &#39;strings&#39;: [&#39;foo&#39;, &#39;bar&#39;, &#39;bar&#39;, &#39;foo&#39;, &#39;foo bar&#39;, &#39; foo bar &#39;]},
 &#39;scalars&#39;: {&#39;boolean&#39;: &#39;True&#39;,
             &#39;float&#39;: &#39;1.0&#39;,
             &#39;integer&#39;: &#39;1&#39;,
             &#39;string&#39;: &#39;foo&#39;}}


### Using the config manager with optparse

Traceback (most recent call last):
  File &quot;../../../scripts/tutorials/misc.config.py&quot;, line 74, in &lt;module&gt;
    main(sys.argv[1:])
  File &quot;../../../scripts/tutorials/misc.config.py&quot;, line 41, in main
    cfg = optcfg = cfgm.opt_parse(args=argv)
  File &quot;/home/shom/sraynaud/Dev/forge/vacumm/lib/vacumm/misc/config.py&quot;, line 1368, in opt_parse
    (options, args) = parser.parse_args(list(args))
  File &quot;/local/tmp/sraynaud/Soft/conda2/lib/python2.7/optparse.py&quot;, line 1384, in parse_args
    values = self.get_default_values()
  File &quot;/local/tmp/sraynaud/Soft/conda2/lib/python2.7/optparse.py&quot;, line 1329, in get_default_values
    defaults[option.dest] = option.check_value(opt_str, default)
  File &quot;/local/tmp/sraynaud/Soft/conda2/lib/python2.7/optparse.py&quot;, line 770, in check_value
    return checker(self, opt, value)
  File &quot;/home/shom/sraynaud/Dev/forge/vacumm/lib/vacumm/misc/config.py&quot;, line 1302, in wrapper_option_type_checker
    return func(value)
  File &quot;/home/shom/sraynaud/Dev/forge/vacumm/lib/vacumm/misc/config.py&quot;, line 132, in validator_wrapper
    argspec = inspect.getfullargspec(validator)
AttributeError: &#39;module&#39; object has no attribute &#39;getfullargspec&#39;
</pre></div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../index.html">Home</a>|&nbsp;</li>
        <li><a href="../contents.html">Docs</a>|&nbsp;</li>
        <li><a href="../user.faq.html">FAQ</a>|&nbsp;</li>
<!--         <li><a href="../search.html">chercher</a>|&nbsp;</li> -->
        <li><a href="../gallery.html">Gallery</a>|&nbsp;</li>
        <li><a href="https://forge.ifremer.fr/projects/vacumm">Forge</a>&nbsp; &raquo;</li>
 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2010-2015, Actimar/IFREMER.
      Last updated on 21 Jan 2019.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.3.
    </div>
  </body>
</html>